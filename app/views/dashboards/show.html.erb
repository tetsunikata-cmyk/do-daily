<div class="page">
  <!-- 画像カード -->
  <div class="black-card">
    <details class="edit-inline">
      <summary>編集</summary>

      <%= form_with model: @user, url: mypage_path, method: :patch, local: true, html: { multipart: true } do |f| %>
        <%= f.file_field :goal_image, accept: "image/*" %>
        <%= f.submit "保存" %>
      <% end %>
    </details>

    <div class="goal-image-wrapper">
      <% if @user.goal_image.attached? %>
        <%= image_tag @user.goal_image, class: "goal-image" %>
      <% else %>
        <div style="height: 200px; background: #0a0a0a;"></div>
      <% end %>
    </div>
  </div>

  <!-- 文言カード -->
  <div class="black-card">
    <details class="edit-inline">
      <summary>編集</summary>

      <%= form_with model: @user, url: mypage_path, method: :patch, local: true do |f| %>
        <%= f.text_area :vision_text, rows: 3 %>
        <%= f.submit "保存" %>
      <% end %>
    </details>

    <h2>達成したい文言</h2>
    <p class="vision-text">
      <%= @user.vision_text.presence || "2030年にエンジニアリングマネージャーになる。" %>
    </p>
  </div>

  <!-- メインボタン -->
  <%= link_to "目標実現ボタン", habits_path, class: "btn-primary" %>

  <!-- ナビ -->
  <nav class="nav-grid">
    <%= link_to "道しるべを見る", roadmap_path, class: "nav-link-item" %>
    <%= link_to "振り返りを見る", reviews_search_path, class: "nav-link-item" %>
    <%= link_to "My page", mypage_path, class: "nav-link-item" %>
    <%= link_to "ログアウト", destroy_user_session_path,
                data: { turbo_method: :delete, turbo_confirm: "ログアウトしますか？" },
                class: "nav-link-item" %>
  </nav>
</div>