<div class="page">
  <div class="page-header">振り返りの記入</div>

  <!-- ▼ 日付選択 & 「今日は開始〇日目」 -->
  <div class="black-card">
    <h2>日付を選択</h2>

    <%= form_with url: reviews_path, method: :get, local: true do %>
      <%= date_field_tag :date, @selected_date, class: "date-input" %>
      <%= submit_tag "表示", name: nil %>
    <% end %>

    <p>今日は開始<%= @day_count %>日目</p>
  </div>

  <!-- ▼ 振り返り入力フォーム（この日付分だけ保存） -->
  <div class="black-card">
    <%= form_with model: @reflection, url: reviews_path, method: :patch, local: true do |f| %>
      <%= f.hidden_field :review_on, value: @selected_date %>

      <h2>今日の課題</h2>
      <%= f.text_area :challenge, rows: 3, class: "textarea" %>

      <h2>振り返り①</h2>
      <%= f.text_area :reflection1, rows: 3, class: "textarea" %>

      <h2>振り返り②</h2>
      <%= f.text_area :reflection2, rows: 3, class: "textarea" %>

      <h2>今日の振り返り</h2>
      <%= f.text_area :summary, rows: 3, class: "textarea" %>

      <%= f.submit "保存", class: "habit-edit-submit", style: "margin-top: 8px;" %>
    <% end %>
  </div>

  <!-- ▼ 下ナビ -->
  <%= render "shared/bottom_nav" %>
  </nav>
</div>