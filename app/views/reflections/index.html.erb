<div class="page">
  <div class="page-header">振り返りを見る</div>

  <!-- 日付選択 + 今日は開始◯日目 -->
  <div class="black-card">
    <h2>日付を選択</h2>

    <%= form_with url: reviews_path, method: :get, local: true do |f| %>
      <%= f.date_field :date, value: @date, style: "width: 100%; padding: 4px;" %>
      <%= f.submit "検索", style: "margin-top: 8px;" %>
    <% end %>

    <p style="margin-top: 8px;">
      今日は開始<%= @days_from_start %>日目
    </p>
  </div>

  <!-- 今日の課題 + 振り返り①② + 今日の振り返り -->
  <div class="black-card">
    <%= form_with model: @reflection,
                  url: @reflection.persisted? ? review_path(@reflection) : reviews_path,
                  method: @reflection.persisted? ? :patch : :post,
                  local: true do |f| %>

      <%= f.hidden_field :date, value: @date %>

      <h2>今日の課題</h2>
      <%= f.text_area :today_task, rows: 3, style: "width: 100%;" %>

      <h2 style="margin-top: 16px;">振り返り①</h2>
      <%= f.text_area :review1, rows: 4, style: "width: 100%;" %>

      <h2 style="margin-top: 16px;">振り返り②</h2>
      <%= f.text_area :review2, rows: 4, style: "width: 100%;" %>

      <h2 style="margin-top: 16px;">今日の振り返り</h2>
      <%= f.text_area :summary, rows: 4, style: "width: 100%;" %>

      <div style="margin-top: 12px;">
        <%= f.submit "保存", style: "padding: 8px 16px;" %>
      </div>
    <% end %>
  </div>

    <!-- 下ナビ（2×2レイアウト） -->
  <nav class="nav-grid">
    <%= link_to "道しるべを見る", roadmap_path, class: "nav-button" %>
    <%= link_to "振り返りを見る", reviews_path, class: "nav-button" %>
    <%= link_to "My page", mypage_path, class: "nav-button" %>
    <%= link_to "ログアウト", destroy_user_session_path,
                data: { turbo_method: :delete, turbo_confirm: "ログアウトしますか？" },
                class: "nav-button" %>
  </nav>

  <div class="black-card">
  <%= link_to "実行率グラフを見る", analytics_path, class: "nav-button full" %>
</div>
</div>